(function(a,b){var c={init:!1,createObject:function(f,a){var b=function(){!c.init&&this.construct&&this.construct.apply(this,arguments)};c.init=!0;b.prototype=new a;b.constructor=b;b.parent=a;c.init=!1;for(var d in f)f.hasOwnProperty(d)&&("undefined"!==typeof b.prototype[d]&&(b.parent[d]=b.prototype[d]),b.prototype[d]=f[d]);return b},createDelegate:function(a,b,c){return function(){return a.apply(b||a,c||arguments)}},createCallback:function(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(a,
b)}},Delegator:function(a){var b,e=function(b,c){b.call(c||a,a)};b=function(){this.ready=!1;this.stack=[]};b.prototype.push=function(a,f){this.ready?e.call(this,a,f):this.stack.push(Array.prototype.slice.call(arguments))};b.prototype.init=function(){for(var a;a=this.stack.shift();)e.apply(this,a);this.ready=!0};b.prototype.createDelegate=function(){return c.createDelegate(this.init,this)};return b}(this),isMethodType:function(a){return/\b(function|object)\b/i.test(a)},isMethod:function(a,b){return a&&
c.isMethodType(typeof a[b])},toString:Object.prototype.toString};c.onReadyDelegator=new c.Delegator;c.onBeforeUnloadDelegator=new c.Delegator;c.isMethod(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",c.onReadyDelegator.createDelegate(),!1);b.onbeforeunload=c.onBeforeUnloadDelegator.createDelegate();a.getBody=function(){return b.document.body||b.document.documentElement};a.getHead=function(){return b.document.head||b.document.getElementsByTagName("HEAD")[0]};a.encode=function(a){return b.JSON.stringify(a)};
a.decode=function(a){return b.JSON.parse(a)};a.apply=function(a,b,c){for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);for(d in c)c.hasOwnProperty(d)&&!a.hasOwnProperty(d)&&(a[d]=c[d]);return a};a.createCallback=c.createCallback;a.createDelegate=c.createDelegate;a.define=function(a,g,e){for(var d=b,h=a.split(/\./),k=h.pop();void 0!==(a=h.shift());)Object.prototype.hasOwnProperty.call(d,a)||(d[a]={}),d=d[a];"undefined"===typeof e&&(e=g,g=Object);d[k]=c.createObject(e,g)};a.singleton=function(a,c,e){for(var d=
b,h=a.split(/\./),k=h.pop();void 0!==(a=h.shift());)"undefined"!=typeof d.hasOwnProperty&&!d.hasOwnProperty(a)&&(d[a]={}),d=d[a];d[k]=new c;for(i in e)e.hasOwnProperty(i)&&(d[k][i]=e[i]);return d[k]};a.element=function(b){var c,e,d;b.document?(c=b.document,delete b.document):c=document;if(a.isMethod(c,"createElement")&&(b=a.apply(b||{},{},{tag:"div"}),c=c.createElement(b.tag))){delete b.tag;for(e in b)if(b.hasOwnProperty(e)&&"items"!==e&&"content"!==e)if("style"===e)try{for(d in b.style)"cssfloat"===
d.toLowerCase()&&!+"\v1"?c.style.styleFloat=b.style[d]:c.style[d]=b.style[d]}catch(h){throw Error("The value of style."+d+" ("+b.style[d]+") is invalid.");}else c[e]=b[e];"undefined"!==typeof b.content&&(c.innerHTML=b.content);if(b.items)for(e=0;e<b.items.length;e++)try{b.items[e]instanceof HTMLElement?c.appendChild(b.items[e]):c.appendChild(this.element(b.items[e]))}catch(k){}return c}return null};a.isEmpty=function(b,c){return null===b||void 0===b||a.isArray(b)&&!b.length||(!c?""===b:!1)};a.isArray=
function(a){return"[object Array]"===c.toString.apply(a)};a.isDate=function(a){return"[object Date]"===c.toString.apply(a)};a.isPrimitive=function(b){return a.isString(b)||a.isNumber(b)||a.isBoolean(b)};a.isString=function(a){return"string"===typeof a};a.isNumber=function(a){return"number"===typeof a&&isFinite(a)};a.isBoolean=function(a){return"boolean"===typeof a};a.isMethod=c.isMethod;a.isMethodType=c.isMethodType;a.EventDelegator=c.Delegator;a.onDocumentReady=function(a){c.onReadyDelegator.push(a)};
a.onBeforeUnload=function(a){c.onBeforeUnloadDelegator.push(a)};a.onHashChange=function(a){if("addEventListener"in b&&"onhashchange"in b)b.addEventListener("hashchange",a,!1);else{var c=b.location.hash;b.setTimeout(function(){b.location.hash!==c&&(c=b.location.hash,a())},100)}}})(window.RTLi=window.RTLi||{},this);
"undefined"!==typeof console&&!RTLi.isMethod(console,"timeStamp")&&(console.timeStamp=function(a){var b=new Date;console.log(b.getHours()+":"+b.getMinutes()+":"+b.getSeconds()+"."+b.getMilliseconds()+" "+a)});
RTLi.define("WT.Widget",{_version:"4.0.0",_key:"85e2c8b1-e080-4622-8429-0b8f10acd3d1",_init:!1,_head:null,_callback:null,_id:null,_locationId:null,_widget:null,construct:function(a){if(document&&document.head)this._head=document.head,this._init=!0;else if(RTLi.isMethod(document,"getElementsByTagName")){var b=document.getElementsByTagName("HEAD");if(b&&0<b.length)this._head=b[0],this._init=!0;else if((b=document.getElementsByTagName("SCRIPT"))&&0<b.length)this._head=b[0].parentNode,this._init=!0}RTLi.isMethod(document,
"getElementById")&&this._init&&(this._id=a.id,this._locationId=a.locationId,this._callback="ww_"+this._id,this._validateContainer())},_validateContainer:function(){(this._container=document.getElementById(this._id))&&this._run()},_validateBacklink:function(a){var b=document.getElementById(this._id+"-backlink");b||this._renderWidgetError("Missing Backlink.");b.href!==a&&this._renderWidgetError("Invalid Backlink. Please set HREF of wt-widget-backlink to <b>"+a+"</b>")},_renderWidgetError:function(a){this._container.innerHTML=
a},_request:function(a,b,c){if(this._head){var f=this._key,g=this._callback,e=this._head,d=[],h="",k=this;c&&c.scope&&(k=c.scope);window[g]=function(a){b.call(k,a)};if(c&&c.params)for(var l in c.params)c.params.hasOwnProperty(l)&&d.push(l+"="+window.escape(c.params[l]));0<d.length&&(h="&"+d.join("&"));a=RTLi.element({tag:"script",src:a+"?_callback="+g+"&_key="+f+h,type:"text/javascript",onload:function(){e.removeChild(this)},onerror:function(){c.onerror&&c.onerror.call(this)}});e.appendChild(a)}}});
RTLi.define("WT.widget.Classic",WT.Widget,{_run:function(){var a=this;this._request("http://api.wetter.de/api/query/jsonp/v2.geo.location",function(b){!b.success||!b.result||!b.result.result?a._renderWidgetError("missing result data to render widget"):a._onSuccess(b.result.result)},{params:{id:a._locationId},onerror:function(){a._renderWidgetError("error fetching data")}})},_onSuccess:function(a){a.location?a.location.weather?(this._widget=RTLi.element({className:"wt-widget wt-widget-classic",items:[{className:"wt-widget-logo"}]}),
this._renderLogo(),this._renderCountPixel(),this._renderLocation(a.location),this._renderCurrentWeather(a.location.weather),this._renderForecastsDetail(a.location,a.location.forecasts_detail),this._renderSearchbar(),this._container.insertBefore(this._widget,this._container.firstChild),this._validateBacklink(a.location.url)):this._renderWidgetError("Unable to render widget. Missing weather data."):this._renderWidgetError("Unable to render widget. Missing result data.")},_renderLogo:function(){this._widget.appendChild(RTLi.element({className:"wt-widget-logo"}))},
_renderCountPixel:function(){var a=window.location.hostname,b=window.location.pathname,c=RTLi.element({className:"wt-widget-count"});c.appendChild(RTLi.element({tag:"img",src:"http://count.rtl.de/www.wetter.de/wetter-widget.gif?hostname="+escape(a)+"&pathname="+escape(b)+"&version="+escape(this._version)}));this._widget.appendChild(c)},_renderLocation:function(a){var b=a.name?a.name:null,c=null;a.country&&a.country.name&&(c=a.country.name,49==a.country.id&&(a.province&&a.province.name&&a.province.name!=
b)&&(c=a.province.name));c&&(b+="<br/>"+c);this._widget.appendChild(RTLi.element({className:"wt-widget-location-name",content:b}))},_renderCurrentWeather:function(a){var b=RTLi.element({className:"wt-widget-current-weather"}),c=RTLi.element({className:"wt-widget-weather-icon"});a.icon_weather&&c.appendChild(RTLi.element({tag:"img",src:"http://cdn.static-fra.de/wetterv3/css/images/icons/weather/m/"+a.icon_weather+"_M.png"}));var f=RTLi.element({className:"wt-widget-weather-temperature",content:a.temperature+
"&deg;"});a=RTLi.element({className:"wt-widget-weather-condition",content:a.key_weather_condition});b.appendChild(c);b.appendChild(f);b.appendChild(a);this._widget.appendChild(b)},_renderForecastsDetail:function(a,b){var c,f,g;b&&(c=b[0],f=b[1],g=b[2]);if(c&&f&&g){var e=RTLi.element({className:"wt-widget-forecasts-detail"});e.appendChild(this._getMarkupForecastDetail(c,"wt-widget-forecast-detail-morning","Vormittags"));e.appendChild(this._getMarkupForecastDetail(f,"wt-widget-forecast-detail-noon",
"Mittags"));e.appendChild(this._getMarkupForecastDetail(g,"wt-widget-forecast-detail-evening","Abends"));e.appendChild(RTLi.element({className:"wt-widget-clear"}));this._widget.appendChild(e)}else this._renderWeatherReport(a.weather_report_overview)},_getMarkupForecastDetail:function(a,b,c){b=RTLi.element({className:b});c=RTLi.element({className:"wt-widget-weather-title",content:c});var f=RTLi.element({className:"wt-widget-weather-icon"});a.refs.icon_weather&&f.appendChild(RTLi.element({tag:"img",
src:"http://cdn.static-fra.de/wetterv3/css/images/icons/weather/xs-center/"+a.refs.icon_weather+"_xs.png"}));var g=RTLi.element({className:"wt-widget-weather-temperature",content:a.temperature+"&deg;"});a=RTLi.element({className:"wt-widget-weather-condition",content:a.refs.key_weather_condition});b.appendChild(c);b.appendChild(f);b.appendChild(g);b.appendChild(a);return b},_renderWeatherReport:function(a){var b=RTLi.element({className:"wt-widget-weather-report"}),c=RTLi.element({className:"wt-widget-weather-report-headline",
content:a.headline?a.headline:null});a=RTLi.element({className:"wt-widget-weather-text",content:a.reports&&a.reports.day0?a.reports.day0:null});b.appendChild(c);b.appendChild(a);this._widget.appendChild(b)},_renderSearchbar:function(){var a=RTLi.element({className:"wt-widget-searchbar"});a.innerHTML='<form action="http://www.wetter.de/suche.html" target="_blank"><input class="wt-widget-searchbar-field" type="text" name="search"><input class="wt-widget-searchbar-button" type="submit" value=""></form>';
a.appendChild(RTLi.element({className:"wt-widget-clear"}));this._widget.appendChild(a)}});
